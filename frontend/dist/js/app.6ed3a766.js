(function(t){function e(e){for(var a,i,o=e[0],c=e[1],d=e[2],u=0,p=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(p.length)p.shift()();return n.push.apply(n,d||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,o=1;o<s.length;o++){var c=s[o];0!==r[c]&&(a=!1)}a&&(n.splice(e--,1),t=i(i.s=s[0]))}return t}var a={},r={app:0},n=[];function i(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=a,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var d=0;d<o.length;d++)e(o[d]);var l=c;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var a=s("85ec"),r=s.n(a);r.a},"0d8f":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("NavBar"),s("div",[s("router-view")],1)],1)},n=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"bnavbar"}},[s("b-navbar",{attrs:{toggleable:"sm",type:"dark",variant:"info"}},[s("b-navbar-brand",{attrs:{href:"#"}},[t._v("Compute Web App UI")]),s("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),s("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[s("b-navbar-nav",[s("b-nav-item",{attrs:{to:"/"}},[t._v("Home")]),s("b-nav-item",{attrs:{to:"/data-list"}},[t._v("Data List")]),s("b-nav-item",{attrs:{to:"/process-list"}},[t._v("Process List")])],1)],1)],1)],1)},o=[],c={name:"NavBar",props:{}},d=c,l=s("2877"),u=Object(l["a"])(d,i,o,!1,null,null,null),p=u.exports,f={name:"App",components:{NavBar:p}},m=f,v=(s("034f"),Object(l["a"])(m,r,n,!1,null,null,null)),b=v.exports,_=s("2f62");a["default"].use(_["a"]);var g=new _["a"].Store({state:{},mutations:{},actions:{},modules:{}}),h=s("8c4f"),D=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},y=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("p",[t._v("Welcome to Compute Web App UI")])])}],w={name:"Home",components:{}},P=w,S=Object(l["a"])(P,D,y,!1,null,null,null),k=S.exports,x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-view"},[s("DataList")],1)},I=[],O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("loading",{attrs:{active:t.isLoading,"can-cancel":!1,"is-full-page":!0},on:{"update:active":function(e){t.isLoading=e}}}),s("b-form-checkbox",{model:{value:t.periodicRetrieve,callback:function(e){t.periodicRetrieve=e},expression:"periodicRetrieve"}},[t._v("Watch Datas")]),s("b-table",{attrs:{small:"",striped:"","show-empty":"",bordered:"",stacked:"sm",items:t.items,fields:t.fields,"sort-by":t.sortBy,"sort-desc":t.sortDesc},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"cell(size)",fn:function(e){return[s("span",{attrs:{id:"tooltip-size-"+e.item.id}},[t._v(t._s((e.value/1024/1024).toFixed(2)))]),s("b-tooltip",{attrs:{target:"tooltip-size-"+e.item.id,triggers:"hover"}},[t._v(" "+t._s(e.value)+" Bytes ")])]}},{key:"cell(uploaded_bytes)",fn:function(e){return[s("span",{attrs:{id:"tooltip-uploaded_bytes-"+e.item.id}},[t._v(t._s((e.value/1024/1024).toFixed(2)))]),s("b-tooltip",{attrs:{target:"tooltip-uploaded_bytes-"+e.item.id,triggers:"hover"}},[t._v(" "+t._s(e.value)+" Bytes ")])]}},{key:"cell(stored_bytes)",fn:function(e){return[s("span",{attrs:{id:"tooltip-stored_bytes-"+e.item.id}},[t._v(t._s((e.value/1024/1024).toFixed(2)))]),s("b-tooltip",{attrs:{target:"tooltip-stored_bytes-"+e.item.id,triggers:"hover"}},[t._v(" "+t._s(e.value)+" Bytes ")])]}},{key:"cell(name)",fn:function(e){return[s("span",{attrs:{id:"tooltip-name-"+e.item.id}},[t._v(t._s(e.value.slice(0,16)+"..."))]),s("b-tooltip",{attrs:{target:"tooltip-name-"+e.item.id,triggers:"hover"}},[t._v(" "+t._s(e.value)+" ")])]}},{key:"cell(status)",fn:function(t){return[s("DataStatus",{attrs:{data:t}})]}},{key:"cell(info)",fn:function(t){return[s("DataInfo",{attrs:{data:t}})]}},{key:"cell(process)",fn:function(t){return[s("DataAddProcess",{attrs:{data:t}})]}}])})],1)},j=[],L=(s("7db0"),s("caad"),s("c975"),s("a434"),s("2532"),s("bc3a")),A=s.n(L),R=s("9062"),B=s.n(R),N=(s("e40d"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.data.item.status.stored?[s("b-icon-check-circle",{attrs:{variant:"success","font-scale":"2"}},[t._v(">")])]:[s("b-progress",{attrs:{value:t.data.item.status.upload_progress,max:"100","show-progress":"",animated:t.data.item.status.upload_progress<100,id:"tooltip-upload_progress-"+t.data.item.id,variant:"info"}}),s("b-progress",{attrs:{value:t.data.item.status.store_progress,max:"100","show-progress":"",animated:"",id:"tooltip-store_progress-"+t.data.item.id,variant:"primary"}}),s("b-tooltip",{attrs:{target:"tooltip-upload_progress-"+t.data.item.id,triggers:"hover"}},[t._v(" Upload progress ")]),s("b-tooltip",{attrs:{target:"tooltip-store_progress-"+t.data.item.id,triggers:"hover"}},[t._v(" Store progress ")])]],2)}),E=[],$={name:"DataStatus",props:{data:Object},data:function(){return{}},filters:{},methods:{},components:{},mounted:function(){},beforeDestroy:function(){},watch:{}},T=$,U=Object(l["a"])(T,N,E,!1,null,"8708c29e",null),M=U.exports,V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"add-process-modal-"+t.data.item.id,expression:"'add-process-modal-'+data.item.id"}],staticStyle:{border:"none"},attrs:{variant:"outline-info"}},[s("b-icon-plus-circle-fill",{attrs:{"font-scale":"1.5"}})],1),s("b-modal",{attrs:{id:"add-process-modal-"+t.data.item.id,title:"Post a new process to data "+t.data.item.id,"ok-disabled":null==t.processDefinitionSelected},on:{show:function(e){return t.retrieveProcessDefinitions(t.data.item)},ok:function(e){return t.addProcess(t.data.item.id,t.processDefinitionSelected)}},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addProcess(t.data.item.id,t.processDefinitionSelected)}}},[s("b-form-select",{attrs:{options:t.processDefinitions},model:{value:t.processDefinitionSelected,callback:function(e){t.processDefinitionSelected=e},expression:"processDefinitionSelected"}}),t.processDefinitionSelected?t._l(t.processDefinitionSelected.parameters,(function(e){return s("div",{key:e.name},[s("label",{attrs:{for:"type-"+e.name}},[t._v(t._s(e.name))]),s("b-form-input",{attrs:{id:"type-"+e.name,type:t.getType(e.type)},model:{value:e.value,callback:function(s){t.$set(e,"value",s)},expression:"parameter.value"}})],1)})):t._e()],2)],1)},C=[],F=(s("b0c0"),{name:"DataList",props:{data:Object},data:function(){return{processDefinitionSelected:null,processDefinitions:null}},methods:{getType:function(t){switch(t){case"string":return"text";case"integer":case"number":return"number";default:return alert("Unknwon type "+t),""}},retrieveProcessDefinitions:function(t){var e=this;A.a.get("/api/process_definition").then((function(s){var a=s.data;for(var r in e.processDefinitions=[],a){var n=a[r],i={text:n.id,value:n},o=!0;t.status.stored||(o&=n.options&&n.options.includes("early_process")),o&&e.processDefinitions.push(i)}for(var c in e.processDefinitions){var d=e.processDefinitions[c];for(var l in d.value.parameters){var u=d.value.parameters[l];u.name=l,u.default?u.value=u.default:u.value=""}}e.processDefinitions.length>0?e.processDefinitionSelected=e.processDefinitions[0].value:e.processDefinitionSelected=null})).catch((function(t){throw console.log("error on store"),t}))},addProcess:function(t,e){var s=this,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r={};for(var n in e.parameters)r[n]=e.parameters[n].value;var i={version:"1.0",data_id:t,process_definition_id:e.id,parameters:r};A.a.post("/api/process",i).then((function(t){a&&s.startProcess(t.data.process_id)})).catch((function(t){throw console.log("error on store"),t}))},startProcess:function(t){var e={version:"1.0",process_id:t,name:"start"};A.a.post("/api/process_action",e).then((function(t){})).catch((function(t){throw console.log("error on store"),t}))}}}),G=F,z=Object(l["a"])(G,V,C,!1,null,"35db9baa",null),W=z.exports,H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"info-modal-"+t.data.item.id,expression:"'info-modal-'+data.item.id"}],staticStyle:{border:"none"},attrs:{variant:"outline-info"}},[s("b-icon-info-circle-fill",{attrs:{"font-scale":"1.5"}})],1),s("b-modal",{attrs:{id:"info-modal-"+t.data.item.id,title:"Information on data "+t.data.item.id,"ok-only":"",size:"lg"}},[s("b-table-simple",{attrs:{small:"",fixed:""}},[s("b-tbody",[s("b-tr",[s("b-td",[t._v("Filename")]),s("b-td",[t._v(t._s(t.data.item.filename))])],1),s("b-tr",[s("b-td",[t._v("Name")]),s("b-td",[t._v(t._s(t.data.item.name))])],1),s("b-tr",[s("b-td",[t._v("Status")]),s("b-td",[s("DataStatus",{attrs:{data:t.currentData}})],1)],1),s("b-tr",[s("b-td",[t._v("Download")]),s("b-td",[s("b-link",{attrs:{href:t.downloadLink}},[s("b-icon-download",{attrs:{"font-scale":"2"}},[t._v(">")])],1)],1)],1),s("b-tr",[s("b-td",[t._v("Upload end time")]),s("b-td",[t._v(t._s(t.formatDateAssigned(t.data.item.upload_end_time)))])],1),s("b-tr",[s("b-td",[t._v("Store end time")]),s("b-td",[t._v(t._s(t.formatDateAssigned(t.data.item.store_end_time)))])],1),s("b-tr",[s("b-td",[t._v("Uploaded bytes")]),s("b-td",[t._v(t._s((t.data.item.uploaded_bytes/1024/1024).toFixed(2))+" MB")])],1),s("b-tr",[s("b-td",[t._v("Upload duration")]),s("b-td",[t._v(t._s(t.getDuration(t.data.item.upload_end_time,t.data.item.post_time))+"s")])],1),s("b-tr",[s("b-td",[t._v("Upload rate")]),s("b-td",[t._v(t._s(t.getRate(t.data.item.upload_end_time,t.data.item.post_time,t.data.item.uploaded_bytes))+" MB/s")])],1),s("b-tr",[s("b-td",[t._v("Stored bytes")]),s("b-td",[t._v(t._s((t.data.item.stored_bytes/1024/1024).toFixed(2))+" MB")])],1),s("b-tr",[s("b-td",[t._v("Store duration")]),s("b-td",[t._v(t._s(t.getDuration(t.data.item.store_end_time,t.data.item.post_time))+"s")])],1),s("b-tr",[s("b-td",[t._v("Store rate")]),s("b-td",[t._v(t._s(t.getRate(t.data.item.store_end_time,t.data.item.post_time,t.data.item.stored_bytes))+" MB/s")])],1)],1)],1),s("DatasetsViewer",{attrs:{type:"data",data:t.data.item,datasetNames:t.datasetNames}})],1)],1)},J=[],q=(s("4160"),s("b680"),s("159b"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-row",[s("b-form-checkbox-group",{staticClass:"ml-4",attrs:{options:t.options,"value-field":"item","text-field":"name","aria-label":"Individual dataset"},on:{input:function(e){return t.updateDatasetsImageSrc()}},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),s("b-row",t._l(t.selected,(function(e){return s("b-col",{key:e.name,attrs:{col:"",cols:"6",lg:"3"}},[s("b-img",{attrs:{src:e.imageSrc,fluid:"",alt:"Fluid image"}}),s("p",[t._v(t._s(e.name))])],1)})),1),s("b-row",[s("label",{attrs:{for:"image_group"}},[t._v("Group : "+t._s(t.imageGroup)+"/"+t._s(t.data.groups-1))]),s("b-form-input",{attrs:{id:"image_group",type:"range",min:"0",max:t.data.groups-1},on:{input:function(e){return t.updateDatasetsImageSrc()}},model:{value:t.imageGroup,callback:function(e){t.imageGroup=e},expression:"imageGroup"}}),t.depth>1?s("label",{attrs:{for:"image_group"}},[t._v("Depth : "+t._s(t.imageDepth)+"/"+t._s(t.depth-1))]):t._e(),t.depth>1?s("b-form-input",{attrs:{id:"image_depth",type:"range",min:"0",max:t.depth-1},on:{input:function(e){return t.updateDatasetsImageSrc()}},model:{value:t.imageDepth,callback:function(e){t.imageDepth=e},expression:"imageDepth"}}):t._e()],1)],1)}),K=[],Q=s("b85c"),X={name:"DatasetsViewer",props:{type:String,data:Object,datasetNames:Array},computed:{},data:function(){return{options:[],selected:[],depth:1,imageGroup:0,imageDepth:0}},methods:{updateDatasetsImageSrc:function(){var t,e=Object(Q["a"])(this.selected);try{for(e.s();!(t=e.n()).done;){var s=t.value,a="/api";a+="/"+this.type+"/"+this.data.id,a+="/group/"+this.imageGroup,a+="/dataset/"+s.name+"/image",a+="?start="+this.imageDepth+"&length=1",s.imageSrc=a}}catch(r){e.e(r)}finally{e.f()}}},created:function(){var t,e=this,s=Object(Q["a"])(this.datasetNames);try{var a=function(){var s=t.value,a=e.data.datasets.find((function(t){return t.name===s}));2==a.shape.length?a.shape.push(1):a.shape[2]>e.depth&&(e.depth=a.shape[2]),e.options.push({item:a,name:a.name}),e.selected.push(a)};for(s.s();!(t=s.n()).done;)a()}catch(r){s.e(r)}finally{s.f()}this.updateDatasetsImageSrc()}},Y=X,Z=Object(l["a"])(Y,q,K,!1,null,"e9a21b9c",null),tt=Z.exports,et={name:"DataInfo",components:{DatasetsViewer:tt,DataStatus:M},props:{data:Object},computed:{datasetNames:function(){var t=[];return this.data.item.datasets.forEach((function(e){t.push(e.name)})),t},downloadLink:function(){var t="/api";return t+="/data/"+this.data.item.id+"/file",t}},data:function(){return{currentData:Object}},methods:{formatDateAssigned:function(t){if(!(t instanceof Date)||isNaN(t))return"";var e={year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};return t.toLocaleDateString(void 0,e)},getDuration:function(t,e){return Math.abs(t-e)/1e3},getRate:function(t,e,s){var a=s/1024/1024/(Math.abs(t-e)/1e3);return a.toFixed(2)}},mounted:function(){this.currentData=this.data}},st=et,at=Object(l["a"])(st,H,J,!1,null,"5ee1eaec",null),rt=at.exports,nt={name:"DataList",props:{},data:function(){return{items:[],fields:[{key:"id",label:"Data Id",sortable:!0},{key:"post_time",label:"Post Time",sortable:!0,formatter:"formatDateAssigned"},{key:"stored_bytes",label:"Size (MB)",sortable:!0},{key:"version",label:"Version",sortable:!0},{key:"status",label:"Upload Status",sortable:!0},{key:"info",label:"Info"},{key:"process",label:"Process"}],sortBy:"post_time",sortDesc:!0,isLoading:!1,processDefinitionSelected:null,processDefinitions:[],uploadingDataIds:[],interval:null,periodicRetrieve:!0}},filters:{},methods:{formatDateAssigned:function(t){if(!(t instanceof Date)||isNaN(t))return"";var e={year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};return t.toLocaleDateString(void 0,e)},retrieveDatas:function(){var t=this;A.a.get("/api/data?details").then((function(e){var s=e.data,a=function(e){var a=s[e];a.post_time=new Date(a.post_time),a.upload_end_time=new Date(a.upload_end_time),a.store_end_time=new Date(a.store_end_time),a.status.stored||setTimeout((function(){return t.retrieveData(a.id)}),1e3)};for(var r in s)a(r);t.items=s,t.isLoading=!1})).catch((function(t){throw console.log("error on store"),t}))},retrieveData:function(t){var e=this;A.a.get("/api/data/"+t).then((function(s){var a=e.items.find((function(e){return e.id===t}));if(a||(a=s.data,e.items.push(a)),a=Object.assign(a,s.data),a.post_time=new Date(a.post_time),a.upload_end_time=new Date(a.upload_end_time),a.store_end_time=new Date(a.store_end_time),a.status.stored){var r=e.uploadingDataIds.indexOf(t);r>-1&&e.uploadingDataIds.splice(t,1)}else setTimeout((function(){return e.retrieveData(t)}),1e3)})).catch((function(t){throw console.log("error on store"),t}))},retrieveUploadingDatas:function(){var t=this;A.a.get("/api/data_uploading").then((function(e){var s=e.data;for(var a in s){var r=s[a];t.uploadingDataIds.includes(r)||(console.log("new uploading data_id : "+r),t.uploadingDataIds.push(r),t.retrieveData(r))}})).catch((function(t){throw console.log("error on store"),t}))}},components:{Loading:B.a,DataStatus:M,DataAddProcess:W,DataInfo:rt},mounted:function(){var t=this;this.isLoading=!0,this.retrieveDatas(),this.periodicRetrieve&&!this.interval&&(this.interval=setInterval((function(){return t.retrieveUploadingDatas()}),1e3))},beforeDestroy:function(){clearInterval(this.interval)},watch:{periodicRetrieve:function(t){var e=this;t?this.interval||(this.interval=setInterval((function(){return e.retrieveUploadingDatas()}),1e3)):(clearInterval(this.interval),this.interval=null)}}},it=nt,ot=Object(l["a"])(it,O,j,!1,null,"7aa610e4",null),ct=ot.exports,dt={name:"DataListView",props:{},data:function(){return{}},components:{DataList:ct}},lt=dt,ut=Object(l["a"])(lt,x,I,!1,null,null,null),pt=ut.exports,ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"process-view"},[s("ProcessList")],1)},mt=[],vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"process-list"},[s("loading",{attrs:{active:t.isLoading,"can-cancel":!1,"is-full-page":!0},on:{"update:active":function(e){t.isLoading=e}}}),s("b-form-checkbox",{model:{value:t.periodicRetrieve,callback:function(e){t.periodicRetrieve=e},expression:"periodicRetrieve"}},[t._v("Watch Processes")]),s("b-table",{attrs:{small:"",striped:"","show-empty":"",bordered:"",stacked:"sm",items:t.items,fields:t.fields,"sort-by":t.sortBy,"sort-desc":t.sortDesc},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"cell(status)",fn:function(t){return[s("ProcessStatus",{attrs:{data:t}})]}},{key:"cell(info)",fn:function(t){return[s("ResultInfo",{attrs:{processId:t.item.id,process:t}})]}},{key:"cell(action)",fn:function(e){return[s("ProcessAction",{attrs:{processId:e.item.id,status:e.item.status},on:{sent:function(s){return t.onActionSent(e.item.id)}}})]}}])})],1)},bt=[],_t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.status.running||t.status.done?t.status.running&&!t.status.done?[t.status.suspended?t._e():s("b-button",{staticStyle:{border:"none"},attrs:{variant:"outline-secondary"},on:{click:function(e){return t.suspendProcess()}}},[s("b-icon-pause-fill",{attrs:{"font-scale":"1.5"}})],1),t.status.suspended?s("b-button",{staticStyle:{border:"none"},attrs:{variant:"outline-secondary"},on:{click:function(e){return t.resumeProcess()}}},[s("b-icon-triangle-fill",{attrs:{rotate:"90","font-scale":"1.5"}})],1):t._e(),t.status.suspended?s("b-button",{staticStyle:{border:"none"},attrs:{variant:"outline-danger"},on:{click:function(e){return t.stopProcess()}}},[s("b-icon-square-fill",{attrs:{"font-scale":"1.5"}})],1):t._e()]:[s("b-button",{staticStyle:{border:"none"},attrs:{variant:"outline-danger"},on:{click:function(e){return t.resetProcess()}}},[s("b-icon-arrow-clockwise",{attrs:{"font-scale":"1.5"}})],1)]:[t.status.errors.length>0?[s("b-button",{staticStyle:{border:"none"},attrs:{variant:"outline-danger"},on:{click:function(e){return t.resetProcess()}}},[s("b-icon-arrow-clockwise",{attrs:{"font-scale":"1.5"}})],1)]:[s("b-button",{staticStyle:{border:"none"},attrs:{variant:"outline-info"},on:{click:function(e){return t.startProcess()}}},[s("b-icon-triangle-fill",{attrs:{rotate:"90","font-scale":"1.5"}})],1)]]],2)},gt=[],ht={name:"ProcessAction",props:{status:Object,processId:String},methods:{sendProcessAction:function(t){var e=this,s={version:"1.0",process_id:this.processId,name:t},a=this;A.a.post("/api/process_action",s).then((function(){a.$emit("sent",e.processId)})).catch((function(t){throw console.log("error on store"),t}))},startProcess:function(){this.sendProcessAction("start")},suspendProcess:function(){this.sendProcessAction("suspend")},resumeProcess:function(){this.sendProcessAction("resume")},stopProcess:function(){confirm("Stop process "+this.processId+"?")&&this.sendProcessAction("stop")},resetProcess:function(){confirm("Stop process "+this.processId+"?")&&this.sendProcessAction("reset")}}},Dt=ht,yt=Object(l["a"])(Dt,_t,gt,!1,null,"55fb1fe2",null),wt=yt.exports,Pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.data.item.status.transfer?[t.data.item.status.transfer.uploaded?t._e():[s("b-progress",{attrs:{value:t.data.item.status.transfer.upload_progress,max:"100","show-progress":"",animated:"",variant:"secondary",id:"tooltip-upload_progress-"+t.data.item.id}}),s("b-tooltip",{attrs:{target:"tooltip-upload_progress-"+t.data.item.id,triggers:"hover"}},[t._v(" Upload progress ")])],t.data.item.status.transfer.stored?t._e():[s("b-progress",{attrs:{value:t.data.item.status.transfer.store_progress,max:"100","show-progress":"",animated:"",variant:"info",id:"tooltip-store_progress-"+t.data.item.id}}),s("b-tooltip",{attrs:{target:"tooltip-store_progress-"+t.data.item.id,triggers:"hover"}},[t._v(" Store progress ")])]]:t._e(),t.data.item.status.running?[s("b-progress",{attrs:{value:t.data.item.status.progress,max:"100","show-progress":"",animated:"",variant:"primary",id:"tooltip-progress-"+t.data.item.id}}),s("b-tooltip",{attrs:{target:"tooltip-progress-"+t.data.item.id,triggers:"hover"}},[t._v(" Process progress ")])]:[t.data.item.status.done?s("b-icon-check-circle",{attrs:{variant:"success","font-scale":"2"}},[t._v(">")]):t.data.item.status.errors.length>0?s("b-icon-x-circle",{attrs:{id:"tooltip-"+t.data.item.id,variant:"danger","font-scale":"1.5"}},[t._v(">")]):t._e(),t.data.item.status.errors.length>0?s("b-tooltip",{attrs:{target:"tooltip-"+t.data.item.id,triggers:"hover"}},[s("ul",t._l(t.data.item.status.errors,(function(e){return s("li",{key:e},[t._v(" "+t._s(e)+" ")])})),0)]):t._e()]],2)},St=[],kt={name:"ProcessStatus",props:{data:Object}},xt=kt,It=Object(l["a"])(xt,Pt,St,!1,null,"1e08aee4",null),Ot=It.exports,jt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"result-info-modal-"+t.process.item.id,expression:"'result-info-modal-'+process.item.id"}],staticStyle:{border:"none"},attrs:{variant:"outline-info"}},[s("b-icon-info-circle-fill",{attrs:{"font-scale":"1.5"}})],1),s("b-modal",{attrs:{id:"result-info-modal-"+t.process.item.id,title:"Information on result "+t.process.item.id,"ok-only":"",size:"lg"}},[s("b-table-simple",{attrs:{small:"",fixed:""}},[s("b-tbody",[s("b-tr",[s("b-td",[t._v("Process Definition")]),s("b-td",[t._v(t._s(t.process.item.process_definition_id))])],1),s("b-tr",[s("b-td",[t._v("Parameters")]),s("b-td",[s("b-table-lite",{attrs:{small:"",items:t.process.item.parameters,"table-variant":"info"}})],1)],1),s("b-tr",[s("b-td",[t._v("Status")]),s("b-td",[s("ProcessStatus",{attrs:{data:t.process}})],1)],1),s("b-tr",[s("b-td",[t._v("Download")]),s("b-td",[s("b-link",{attrs:{href:t.downloadLink}},[s("b-icon-download",{attrs:{"font-scale":"2"}},[t._v(">")])],1)],1)],1),s("b-tr",[s("b-td",[t._v("Post time")]),s("b-td",[t._v(t._s(t.formatDateAssigned(t.process.item.post_time)))])],1),s("b-tr",[s("b-td",[t._v("Start time")]),s("b-td",[t._v(t._s(t.formatDateAssigned(t.process.item.start_time)))])],1),s("b-tr",[s("b-td",[t._v("End time")]),s("b-td",[t._v(t._s(t.formatDateAssigned(t.process.item.end_time)))])],1),s("b-tr",[s("b-td",[t._v("Process duration")]),s("b-td",[t._v(t._s(t.getDurationStr(t.process.item.start_time,t.process.item.end_time)))])],1)],1)],1),t.result?s("p",[s("DatasetsViewer",{attrs:{type:"result",data:t.result,datasetNames:t.datasetNames}})],1):t._e()],1)],1)},Lt=[],At={name:"ResultInfo",components:{DatasetsViewer:tt,ProcessStatus:Ot},props:{processId:String,process:Object},computed:{datasetNames:function(){var t=[];return this.result?(this.result.datasets.forEach((function(e){t.push(e.name)})),t):t},downloadLink:function(){var t="/api";return t+="/result/"+this.process.item.id+"/file",t}},data:function(){return{result:null}},methods:{formatDateAssigned:function(t){if(!(t instanceof Date)||isNaN(t))return"";var e={year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};return t.toLocaleDateString(void 0,e)},getDurationStr:function(t,e){if(!t||!e)return"";var s=(e-t)/1e3;return s+"s"},getRate:function(t,e,s){var a=s/1024/1024/(Math.abs(t-e)/1e3);return a.toFixed(2)},retreiveResult:function(){var t=this;this.result||A.a.get("/api/result/"+this.processId).then((function(e){t.result=e.data})).catch((function(t){t.response.status}))}},mounted:function(){this.process.item.status.progress>0&&this.retreiveResult()},watch:{"process.item.status.progress":function(t){t>0&&this.retreiveResult()}}},Rt=At,Bt=Object(l["a"])(Rt,jt,Lt,!1,null,"0a6be49f",null),Nt=Bt.exports,Et={name:"ProcessList",props:{},data:function(){return{items:[],fields:[{key:"id",label:"Process Id",sortable:!0},{key:"post_time",label:"Post Time",sortable:!0,formatter:"formatDateAssigned"},{key:"data_id",label:"Data Id",sortable:!0},{key:"process_definition_id",label:"Process Definition",sortable:!0},{key:"action",label:"Action"},{key:"status",label:"Status",sortable:!0,class:["text-center","align-middle"]},{key:"info",label:"Info"}],sortBy:"post_time",sortDesc:!0,isLoading:!1,runningProcessIds:[],interval:null,periodicRetrieve:!0}},methods:{objectToList:function(t){var e=[];for(var s in t){var a={name:s,value:t[s]};e.push(a)}return e},formatDateAssigned:function(t){if(!t)return"";var e={year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};return t.toLocaleDateString(void 0,e)},retrieveProcesses:function(){var t=this;this.isLoading=!0,A.a.get("/api/process").then((function(e){var s=e.data;for(var a in s){var r=s[a];r.parameters=t.objectToList(r.parameters),r.post_time=new Date(r.post_time),r.start_time&&(r.start_time=new Date(r.start_time)),r.end_time&&(r.end_time=new Date(r.end_time)),r.status.transfer={uploaded:!0,upload_progress:100,stored:!0,store_progress:100},r.status.running&&t.retrieveProcess(r.id)}t.items=s,t.isLoading=!1})).catch((function(t){throw console.log("error retrieveProcesses()"),t}))},retrieveProcess:function(t){var e=this;A.a.get("/api/process/"+t).then((function(s){console.log(s);var a=e.items.find((function(e){return e.id===t}));if(a||(a=s.data,e.items.push(a)),a.status.transfer&&(s.data.status.transfer=a.status.transfer),a=Object.assign(a,s.data),a.parameters=e.objectToList(a.parameters),a.post_time=new Date(a.post_time),a.start_time&&(a.start_time=new Date(a.start_time)),a.end_time&&(a.end_time=new Date(a.end_time)),a.status.running&&!a.status.suspended)a.status.transfer&&a.status.transfer.stored||e.retreiveDataTransferStatus(a),e.runningProcessIds.includes(t)||(console.log("new running process_id : "+t),e.runningProcessIds.push(t)),setTimeout((function(){return e.retrieveProcess(t)}),1e3);else{var r=e.runningProcessIds.indexOf(t);r>-1&&e.runningProcessIds.splice(t,1),a.status.transfer={uploaded:!0,upload_progress:100,stored:!0,store_progress:100}}})).catch((function(t){throw console.log("error retrieveProcess()"),t}))},retreiveDataTransferStatus:function(t){A.a.get("/api/data/"+t.data_id).then((function(e){t.status.transfer=e.data.status})).catch((function(t){throw console.log("error retreiveDataTransferStatus()"),t}))},retrieveRunningProcesses:function(){var t=this;A.a.get("/api/process_running").then((function(e){var s=e.data;for(var a in s){var r=s[a];t.runningProcessIds.includes(r)||(console.log("new running process_id : "+r),t.runningProcessIds.push(r),t.retrieveProcess(r))}})).catch((function(t){throw console.log("error retrieveRunningProcesses()"),t}))},onActionSent:function(t){console.log("retrieveProcess: "+t),this.retrieveProcess(t)}},components:{Loading:B.a,ProcessAction:wt,ProcessStatus:Ot,ResultInfo:Nt},mounted:function(){var t=this;this.retrieveProcesses(),this.periodicRetrieve&&!this.interval&&(this.interval=setInterval((function(){return t.retrieveRunningProcesses()}),1e3))},beforeDestroy:function(){clearInterval(this.interval)},watch:{periodicRetrieve:function(t){var e=this;t?this.interval||(this.interval=setInterval((function(){return e.retrieveRunningProcesses()}),1e3)):(clearInterval(this.interval),this.interval=null)}}},$t=Et,Tt=(s("7595"),Object(l["a"])($t,vt,bt,!1,null,"662ba808",null)),Ut=Tt.exports,Mt={name:"ProcessListView",props:{},data:function(){return{}},components:{ProcessList:Ut}},Vt=Mt,Ct=Object(l["a"])(Vt,ft,mt,!1,null,null,null),Ft=Ct.exports;a["default"].use(h["a"]);var Gt=[{path:"/",name:"Home",component:k},{path:"/data-list",name:"DataListView",component:pt},{path:"/process-list",name:"ProcessListView",component:Ft}],zt=new h["a"]({routes:Gt}),Wt=zt,Ht=s("5f5b"),Jt=s("b1e0"),qt=s("4193"),Kt=(s("2ba8"),s("a7fe")),Qt=s.n(Kt);s("f9e3"),s("2dd8");a["default"].use(qt["a"]),a["default"].use(Qt.a,A.a),a["default"].config.productionTip=!0,a["default"].use(Ht["a"]),a["default"].use(Jt["a"]),new a["default"]({store:g,router:Wt,render:function(t){return t(b)}}).$mount("#app")},7595:function(t,e,s){"use strict";var a=s("0d8f"),r=s.n(a);r.a},"85ec":function(t,e,s){}});